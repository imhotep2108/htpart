\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{htpthm}

\newif\ifhtpthm@thmonly
\newif\ifhtpthm@thmbkm

\DeclareOption{thmonly}{\htpthm@thmonlytrue}
\DeclareOption{thmbkm}{\htpthm@thmbkmtrue}
\ExecuteOptions{thmonly}
\ExecuteOptions{thmbkm}
\ProcessOptions\relax

\ifhtpart@hyp
\newcommand*{\thmbkm}{\bookmark[dest=\@currentHref,rellevel=1,keeplevel]{%
        \thmt@thmname\space\csname the\thmt@envname\endcsname
        \ifx\thmt@shortoptarg\@empty\else\space(\thmt@shortoptarg)\fi}}
\fi

\ifhtpthm@thmonly
\AddToHook{cmd/lemma/before}{\addtocounter{theorem}{1}}
\AddToHook{cmd/corollary/before}{\addtocounter{theorem}{1}}
\AddToHook{cmd/proposition/before}{\addtocounter{theorem}{1}}
\AddToHook{cmd/conjecture/before}{\addtocounter{theorem}{1}}
\AddToHook{cmd/criterion/before}{\addtocounter{theorem}{1}}
\AddToHook{cmd/assertion/before}{\addtocounter{theorem}{1}}
\AddToHook{cmd/definition/before}{\addtocounter{theorem}{1}}
\AddToHook{cmd/condition/before}{\addtocounter{theorem}{1}}
\AddToHook{cmd/problem/before}{\addtocounter{theorem}{1}}
\AddToHook{cmd/example/before}{\addtocounter{theorem}{1}}
\AddToHook{cmd/exercise/before}{\addtocounter{theorem}{1}}
\AddToHook{cmd/algorithm/before}{\addtocounter{theorem}{1}}
\AddToHook{cmd/question/before}{\addtocounter{theorem}{1}}
\AddToHook{cmd/axiom/before}{\addtocounter{theorem}{1}}
\AddToHook{cmd/property/before}{\addtocounter{theorem}{1}}
\AddToHook{cmd/assumption/before}{\addtocounter{theorem}{1}}
\AddToHook{cmd/hypothesis/before}{\addtocounter{theorem}{1}}
\renewcommand*{\thelemma}{\thetheorem}
\renewcommand*{\thecorollary}{\thetheorem}
\renewcommand*{\theproposition}{\thetheorem}
\renewcommand*{\theconjecture}{\thetheorem}
\renewcommand*{\thecriterion}{\thetheorem}
\renewcommand*{\theassertion}{\thetheorem}
\renewcommand*{\thedefinition}{\thetheorem}
\renewcommand*{\thecondition}{\thetheorem}
\renewcommand*{\theproblem}{\thetheorem}
\renewcommand*{\theexample}{\thetheorem}
\renewcommand*{\theexercise}{\thetheorem}
\renewcommand*{\thealgorithm}{\thetheorem}
\renewcommand*{\thequestion}{\thetheorem}
\renewcommand*{\theaxiom}{\thetheorem}
\renewcommand*{\theproperty}{\thetheorem}
\renewcommand*{\theassumption}{\thetheorem}
\renewcommand*{\thehypothesis}{\thetheorem}
\advance\@enumdepth1
\renewcommand*{\theenumi}{\thetheorem}
\fi

\ifhtpthm@thmbkm
\ifhtpart@hyp
\AddToHook{cmd/thmt@theorem@postheadhook/before}{\thmbkm}
\AddToHook{cmd/thmt@lemma@postheadhook/before}{\thmbkm}
\AddToHook{cmd/thmt@corollary@postheadhook/before}{\thmbkm}
\AddToHook{cmd/thmt@proposition@postheadhook/before}{\thmbkm}
\AddToHook{cmd/thmt@conjecture@postheadhook/before}{\thmbkm}
\AddToHook{cmd/thmt@criterion@postheadhook/before}{\thmbkm}
\AddToHook{cmd/thmt@assertion@postheadhook/before}{\thmbkm}
\AddToHook{cmd/thmt@definition@postheadhook/before}{\thmbkm}
\AddToHook{cmd/thmt@condition@postheadhook/before}{\thmbkm}
\AddToHook{cmd/thmt@problem@postheadhook/before}{\thmbkm}
\AddToHook{cmd/thmt@example@postheadhook/before}{\thmbkm}
\AddToHook{cmd/thmt@exercise@postheadhook/before}{\thmbkm}
\AddToHook{cmd/thmt@algorithm@postheadhook/before}{\thmbkm}
\AddToHook{cmd/thmt@question@postheadhook/before}{\thmbkm}
\AddToHook{cmd/thmt@axiom@postheadhook/before}{\thmbkm}
\AddToHook{cmd/thmt@property@postheadhook/before}{\thmbkm}
\AddToHook{cmd/thmt@assumption@postheadhook/before}{\thmbkm}
\AddToHook{cmd/thmt@hypothesis@postheadhook/before}{\thmbkm}
\fi
\fi

\endinput
